(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3758:function(e,l,t){Promise.resolve().then(t.bind(t,9681))},9681:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return N}});var i=t(7437),o=t(2265),r=t(7813),n=t.n(r);let a=[[[3,1,6],[0,3,6],[5,0,6],[2,2,6],[4,1,6]],[[1,3,7],[6,3,7],[3,2,7],[0,4,7],[5,1,7]],[[2,3,8],[7,0,8],[4,2,8],[1,4,8],[6,1,8]],[[3,3,8],[0,5,8],[5,0,10],[5,2,10],[2,4,10]],[[7,1,10],[4,3,10],[1,5,10],[9,0,10],[6,2,10]],[[3,4,10],[0,6,10],[8,1,10],[5,3,10],[2,5,10]],[[7,2,10],[4,4,10],[1,6,10],[9,1,10],[6,3,10]],[[0,7,10],[8,2,10],[5,4,10],[2,6,10],[7,3,10]]];class s{initialize(){let e=this.generateValueInfo(this.level),l=this.getCardPositions(e),t=[];for(let e=0;e<5;e++){let i=[];for(let t=0;t<5;t++){let o=l.find(l=>l.position===5*e+t),r=void 0!==o?o.value:1;i.push({column:0,row:0,memo:!1,flipped:!1,value:r})}t.push(i)}return this.grid=t,new s(this.winCallback,this.loseCallback,this.grid,!1,!1,0,this.level)}generateValueInfo(e){let l=Math.floor(5*Math.random());switch(e){case 1:return a[0][l];case 2:return a[1][l];case 3:return a[2][l];case 4:return a[3][l];case 5:return a[4][l];case 6:return a[5][l];case 7:return a[6][l];default:return a[7][l]}}getCardPositions(e){let l=[];return e.forEach((e,t)=>{for(let i=0;i<e;i++){let e,i=Math.floor(25*Math.random());for(;l.some(e=>e.position===i);)i=Math.floor(25*Math.random());e=0===t?2:1===t?3:0,l.push({position:i,value:e})}}),l.sort((e,l)=>e.position-l.position)}destroy(){return new s}generateRandomValue(){let e=Math.random();return e<.15?0:e<.7?1:e<.9?2:3}checkIfWon(){var e;for(let l=0;l<(null===(e=this.grid)||void 0===e?void 0:e.length);l++)for(let e=0;e<this.grid[l].length;e++){let t=this.grid[l][e];if(!t.flipped&&t.value>1)return!1}return!0}flipCard(e,l){this.grid[e][l].flipped=!0;let t=this.grid[e][l].value;if(t>1&&(this.currentCoins=this.currentCoins<=0?t:this.currentCoins*t),0===t){this.lost=!0;let e=0;for(let l=0;l<this.grid.length;l++)for(let t=0;t<this.grid[l].length;t++){let i=this.grid[l][t];i.value>0&&i.flipped&&e++}this.level=Math.max(1,Math.min(this.level,e)),this.loseCallback(this.level)}else this.checkIfWon()&&(this.level++,this.won=!0,this.winCallback(this.currentCoins,this.level),this.currentCoins=0);return new s(this.winCallback,this.loseCallback,this.grid,this.won,this.lost,this.currentCoins,this.level)}toggleMemo(e,l){let t=this.grid[e][l].memo;return this.grid[e][l].memo=!t,new s(this.winCallback,this.loseCallback,this.grid,this.won,this.lost,this.currentCoins,this.level)}getColTallies(e){var l;let t=0,i=0;for(let o=0;o<(null===(l=this.grid)||void 0===l?void 0:l.length);o++){let l=this.grid[o][e];l.value>0?t+=l.value:i+=1}return{value:t,bombs:i}}getRowTallies(e){let l=0,t=0,i=this.grid&&this.grid.length&&this.grid[e];for(let e=0;e<(null==i?void 0:i.length);e++){let o=i[e];o.value>0?l+=o.value:t+=1}return{value:l,bombs:t}}constructor(e,l,t,i,o,r,n){this.winCallback=e,this.loseCallback=l,this.grid=t,this.won=i||!1,this.lost=o||!1,this.currentCoins=r||0,this.level=n||1}}var c=t(6648),d=t(9024),u=t.n(d);function m(e){let{cell:l,clickHandler:t,toggleMemo:r,selected:n}=e,a=(0,o.useRef)(null);return(0,i.jsx)("div",{ref:a,className:"".concat(u().cell," ").concat(n&&u().cellSelected),children:l.flipped?(0,i.jsx)("div",{className:u().flippedContainer,children:l.value>0?(0,i.jsx)("div",{className:u().cellContent,children:l.value}):(0,i.jsx)(c.default,{src:"/voltorb-flip/voltorb_full.png",height:100,width:100,alt:"flipped-voltorb"})}):(0,i.jsxs)("div",{className:u().unflippedContainer,onClick:t,onContextMenu:()=>r(),children:[(0,i.jsx)(c.default,{className:u().cellImage,src:"/voltorb-flip/blanktile.svg",priority:!0,alt:"unflipped card",width:100,height:100}),l.memo&&(0,i.jsx)(c.default,{className:u().cellMemo,priority:!0,src:"/voltorb-flip/voltorb_memo.png",width:80,height:80,alt:"memo"})]})})}var h=t(9956),g=t.n(h);function _(e){let{cell:l,tally:t}=e;return(0,i.jsxs)("div",{className:g().tallyContainer,children:[(0,i.jsx)("div",{className:g().valueDiv,children:t.value.toLocaleString(void 0,{minimumIntegerDigits:2})}),(0,i.jsxs)("div",{className:g().bombDiv,children:[(0,i.jsx)(c.default,{src:"/voltorb-flip/voltorb_large.png",alt:"voltorb",width:60,height:60,className:g().voltorb}),(0,i.jsx)("div",{className:g().bombTally,children:t.bombs})]})]})}function v(e){var l;let{memoEnabled:t,setCurrentCoins:r,addTotalCoins:a,setCurrentLevel:c}=e,[d,u]=(0,o.useState)(new s(function(e,l){a(e),c(l)},function(e){console.log("lose callback",e),c(e)})),[h,g]=(0,o.useState)(0),v=(0,o.useRef)(null),f=(0,o.useCallback)((e,l)=>{t?u(d.toggleMemo(e,l)):u(d.flipCard(e,l)),g(5*e+l)},[d,t]),p=(0,o.useCallback)(e=>{switch(e.key){case"ArrowDown":h<20&&g(h+5);break;case"ArrowUp":h>4&&g(h-5);break;case"ArrowLeft":h%5!=0&&g(h-1);break;case"ArrowRight":(h+1)%5!=0&&g(h+1);break;case" ":f(Math.floor(h/5),h%5)}},[f,h]);return(0,o.useEffect)(()=>(document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}),[f,p,h]),(0,o.useEffect)(()=>{let e=e=>{e.preventDefault()};return document.addEventListener("contextmenu",e),()=>{document.removeEventListener("contextmenu",e)}},[]),(0,o.useEffect)(()=>{r(d.currentCoins)},[d,r]),(0,o.useEffect)(()=>{d&&d.grid||u(d.initialize())},[d,u]),(0,i.jsxs)("div",{className:n().outerGridContainer,ref:v,children:[(0,i.jsxs)("div",{className:n().gridColContainer,children:[(0,i.jsxs)("div",{className:n().gridRowContainer,children:[(0,i.jsx)("div",{className:n().innerGridContainer,children:d&&(null===(l=d.grid)||void 0===l?void 0:l.map((e,l)=>e.map((e,t)=>(0,i.jsx)(m,{cell:e,clickHandler:()=>f(l,t),flipCard:()=>u(d.flipCard(l,t)),toggleMemo:()=>u(d.toggleMemo(l,t)),selected:h===5*l+t},t))))}),(0,i.jsx)("div",{className:n().rowTally,children:d&&[void 0,void 0,void 0,void 0,void 0].map((e,l)=>(0,i.jsx)(_,{tally:d.getRowTallies(l)},l))})]}),(0,i.jsxs)("div",{className:n().colTally,children:[d&&[void 0,void 0,void 0,void 0,void 0].map((e,l)=>(0,i.jsx)(_,{tally:d.getColTallies(l)},l)),(0,i.jsx)("div",{style:{height:"100px",width:"100px"}})]})]}),(d.won||d.lost)&&(0,i.jsx)("div",{className:n().frostedContainer,children:(0,i.jsxs)("div",{className:n().gameOverContainer,children:[(0,i.jsx)("div",{className:n().gameOverText,children:d.won?"YOU WON!":"YOU LOST :("}),(0,i.jsx)("button",{className:n().gameOverButton,onClick:()=>u(d.initialize()),children:d.won?"NEXT LEVEL":"PLAY AGAIN?"})]})})]})}var f=t(4699),p=t.n(f),b=t(2809),C=t.n(b);function x(e){let{totalCoins:l,currentCoins:t,memoEnabled:o,toggleMemo:r,currentLevel:n}=e;return(0,i.jsxs)("div",{className:C().sidebar,children:[(0,i.jsxs)("div",{className:C().scoreboard,children:[(0,i.jsx)("div",{className:C().coinLabel,children:"Your coins"}),(0,i.jsx)("div",{className:C().coinTotal,children:l.toLocaleString(void 0,{minimumIntegerDigits:5,useGrouping:!1})}),(0,i.jsx)("div",{className:C().coinLabel,children:"Earned coins"}),(0,i.jsx)("div",{className:C().coinTotal,children:t.toLocaleString(void 0,{minimumIntegerDigits:5,useGrouping:!1})}),(0,i.jsxs)("div",{className:C().coinLabel,children:["Level ",n]})]}),(0,i.jsx)("div",{className:C().memoButton,children:(0,i.jsx)(c.default,{src:"/voltorb-flip/memo_button.png",width:157,height:179,alt:"Toggle memo",title:"Toggle memo",className:"".concat(C().memoImage," ").concat(o&&C().memoImageToggled),onClick:()=>r()})})]})}var w=t(7449),j=t.n(w);function N(){let[e,l]=(0,o.useState)(0),[t,r]=(0,o.useState)(0),[n,a]=(0,o.useState)(0),[s,c]=(0,o.useState)(1);return(0,o.useEffect)(()=>{l(Number(localStorage.getItem("totalCoins"))||0)},[]),(0,o.useEffect)(()=>{let e=e=>{"Control"===e.key&&a(!n)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[n]),(0,i.jsxs)("div",{className:p().page,children:[(0,i.jsx)(j(),{children:(0,i.jsx)("title",{children:"Voltorb flip"})}),(0,i.jsxs)("main",{className:p().main,children:[(0,i.jsx)(x,{memoEnabled:n,totalCoins:e,currentCoins:t,toggleMemo:()=>a(!n),currentLevel:s}),(0,i.jsx)(v,{memoEnabled:n,setCurrentCoins:r,addTotalCoins:t=>{l(e+t),localStorage.setItem("totalCoins",e+t+"")},setCurrentLevel:c})]})]})}},9956:function(e){e.exports={tallyContainer:"cell-tally_tallyContainer__hD6Pt",valueDiv:"cell-tally_valueDiv__IKRl0",bombDiv:"cell-tally_bombDiv__3mh_d",voltorb:"cell-tally_voltorb___4_nt",bombTally:"cell-tally_bombTally__kjjPH"}},9024:function(e){e.exports={cell:"cell_cell__Ns5q3",cellSelected:"cell_cellSelected__r0rwj",cellImage:"cell_cellImage__vlksx",cellContent:"cell_cellContent___tYLw",unflippedContainer:"cell_unflippedContainer__b8UL_",flippedContainer:"cell_flippedContainer__4fvov",cellMemo:"cell_cellMemo__ZJCSM"}},7813:function(e){e.exports={innerGridContainer:"grid_innerGridContainer__cSpDl",rowTally:"grid_rowTally__rv53R",colTally:"grid_colTally__3NXxj",gridRowContainer:"grid_gridRowContainer__iB_YF",gridColContainer:"grid_gridColContainer__Qq0aY",outerGridContainer:"grid_outerGridContainer__dxcqC",frostedContainer:"grid_frostedContainer__1xQYv",gameOverContainer:"grid_gameOverContainer__CbYTk",gameOverText:"grid_gameOverText__2AvWs",gameOverButton:"grid_gameOverButton___hAGQ"}},4699:function(e){e.exports={sidebar:"page_sidebar__jQWvw",page:"page_page__YnKHE",main:"page_main__pZ4ql",ctas:"page_ctas___ariO",primary:"page_primary___J8_A",secondary:"page_secondary__V1XWH",footer:"page_footer__35eJ_",logo:"page_logo__yMLeU"}},2809:function(e){e.exports={sidebar:"sidebar_sidebar__u49QQ",scoreboard:"sidebar_scoreboard__kl65f",coinLabel:"sidebar_coinLabel__zTyUg",coinTotal:"sidebar_coinTotal__Rd9gs",memoButton:"sidebar_memoButton__ZIZZB",memoImage:"sidebar_memoImage__Ey4He",memoImageToggled:"sidebar_memoImageToggled__ut8tn",quitButton:"sidebar_quitButton__cfDgO",quitImage:"sidebar_quitImage__hmCj0"}}},function(e){e.O(0,[128,310,971,23,744],function(){return e(e.s=3758)}),_N_E=e.O()}]);