(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3758:function(e,t,l){Promise.resolve().then(l.bind(l,9681))},9681:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return w}});var i=l(7437),n=l(2265),r=l(7813),o=l.n(r);let a=[[[3,1,6],[0,3,6],[5,0,6],[2,2,6],[4,1,6]],[[1,3,7],[6,3,7],[3,2,7],[0,4,7],[5,1,7]],[[2,3,8],[7,0,8],[4,2,8],[1,4,8],[6,1,8]],[[3,3,8],[0,5,8],[5,0,10],[5,2,10],[2,4,10]],[[7,1,10],[4,3,10],[1,5,10],[9,0,10],[6,2,10]],[[3,4,10],[0,6,10],[8,1,10],[5,3,10],[2,5,10]],[[7,2,10],[4,4,10],[1,6,10],[9,1,10],[6,3,10]],[[0,7,10],[8,2,10],[5,4,10],[2,6,10],[7,3,10]]];class s{initialize(){let e=this.generateValueInfo(this.level),t=this.getCardPositions(e),l=[];for(let e=0;e<5;e++){let i=[];for(let l=0;l<5;l++){let n=t.find(t=>t.position===5*e+l),r=void 0!==n?n.value:1;i.push({column:0,row:0,memo:!1,flipped:!1,value:r})}l.push(i)}return this.grid=l,new s(this.winCallback,this.loseCallback,this.grid,!1,!1,0,this.level)}generateValueInfo(e){let t=Math.floor(5*Math.random());switch(e){case 1:return a[0][t];case 2:return a[1][t];case 3:return a[2][t];case 4:return a[3][t];case 5:return a[4][t];case 6:return a[5][t];case 7:return a[6][t];default:return a[7][t]}}getCardPositions(e){let t=[];return e.forEach((e,l)=>{for(let i=0;i<e;i++){let e,i=Math.floor(25*Math.random());for(;t.some(e=>e.position===i);)i=Math.floor(25*Math.random());e=0===l?2:1===l?3:0,t.push({position:i,value:e})}}),t.sort((e,t)=>e.position-t.position)}destroy(){return new s}generateRandomValue(){let e=Math.random();return e<.15?0:e<.7?1:e<.9?2:3}checkIfWon(){var e;for(let t=0;t<(null===(e=this.grid)||void 0===e?void 0:e.length);t++)for(let e=0;e<this.grid[t].length;e++){let l=this.grid[t][e];if(!l.flipped&&l.value>1)return!1}return!0}flipCard(e,t){this.grid[e][t].flipped=!0;let l=this.grid[e][t].value;if(l>1&&(this.currentCoins=this.currentCoins<=0?l:this.currentCoins*l),0===l){this.lost=!0;let e=0;for(let t=0;t<this.grid.length;t++)for(let l=0;l<this.grid[t].length;l++){let i=this.grid[t][l];i.value>0&&i.flipped&&e++}this.level=Math.max(1,Math.min(this.level,e)),this.loseCallback(this.level)}else this.checkIfWon()&&(this.level++,this.won=!0,this.winCallback(this.currentCoins,this.level),this.currentCoins=0);return new s(this.winCallback,this.loseCallback,this.grid,this.won,this.lost,this.currentCoins,this.level)}toggleMemo(e,t){let l=this.grid[e][t].memo;return this.grid[e][t].memo=!l,new s(this.winCallback,this.loseCallback,this.grid,this.won,this.lost,this.currentCoins,this.level)}getColTallies(e){var t;let l=0,i=0;for(let n=0;n<(null===(t=this.grid)||void 0===t?void 0:t.length);n++){let t=this.grid[n][e];t.value>0?l+=t.value:i+=1}return{value:l,bombs:i}}getRowTallies(e){let t=0,l=0,i=this.grid&&this.grid.length&&this.grid[e];for(let e=0;e<(null==i?void 0:i.length);e++){let n=i[e];n.value>0?t+=n.value:l+=1}return{value:t,bombs:l}}constructor(e,t,l,i,n,r,o){this.winCallback=e,this.loseCallback=t,this.grid=l,this.won=i||!1,this.lost=n||!1,this.currentCoins=r||0,this.level=o||1}}var c=l(6648),d=l(9024),u=l.n(d);function m(e){let{cell:t,clickHandler:l,toggleMemo:r,selected:o}=e,a=(0,n.useRef)(null);return(0,i.jsx)("div",{ref:a,className:"".concat(u().cell," ").concat(o&&u().cellSelected),children:t.flipped?(0,i.jsx)("div",{className:u().flippedContainer,children:t.value>0?(0,i.jsx)("div",{className:u().cellContent,children:t.value}):(0,i.jsx)(c.default,{src:"/voltorb_full.png",height:100,width:100,alt:"flipped-voltorb"})}):(0,i.jsxs)("div",{className:u().unflippedContainer,onClick:l,onContextMenu:()=>r(),children:[(0,i.jsx)(c.default,{className:u().cellImage,src:"/blanktile.svg",priority:!0,alt:"unflipped card",width:100,height:100}),t.memo&&(0,i.jsx)(c.default,{className:u().cellMemo,priority:!0,src:"/voltorb_memo.png",width:80,height:80,alt:"memo"})]})})}var h=l(9956),g=l.n(h);function _(e){let{cell:t,tally:l}=e;return(0,i.jsxs)("div",{className:g().tallyContainer,children:[(0,i.jsx)("div",{className:g().valueDiv,children:l.value.toLocaleString(void 0,{minimumIntegerDigits:2})}),(0,i.jsxs)("div",{className:g().bombDiv,children:[(0,i.jsx)(c.default,{src:"/voltorb_large.png",alt:"voltorb",width:60,height:60,className:g().voltorb}),(0,i.jsx)("div",{className:g().bombTally,children:l.bombs})]})]})}function v(e){var t;let{memoEnabled:l,setCurrentCoins:r,addTotalCoins:a,setCurrentLevel:c}=e,[d,u]=(0,n.useState)(new s(function(e,t){a(e),c(t)},function(e){console.log("lose callback",e),c(e)})),[h,g]=(0,n.useState)(0),v=(0,n.useRef)(null),f=(0,n.useCallback)((e,t)=>{l?u(d.toggleMemo(e,t)):u(d.flipCard(e,t)),g(5*e+t)},[d,l]),C=(0,n.useCallback)(e=>{switch(e.key){case"ArrowDown":h<20&&g(h+5);break;case"ArrowUp":h>4&&g(h-5);break;case"ArrowLeft":h%5!=0&&g(h-1);break;case"ArrowRight":(h+1)%5!=0&&g(h+1);break;case" ":f(Math.floor(h/5),h%5)}},[f,h]);return(0,n.useEffect)(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[f,C,h]),(0,n.useEffect)(()=>{let e=e=>{e.preventDefault()};return document.addEventListener("contextmenu",e),()=>{document.removeEventListener("contextmenu",e)}},[]),(0,n.useEffect)(()=>{r(d.currentCoins)},[d,r]),(0,n.useEffect)(()=>{d&&d.grid||u(d.initialize())},[d,u]),(0,i.jsxs)("div",{className:o().outerGridContainer,ref:v,children:[(0,i.jsxs)("div",{className:o().gridColContainer,children:[(0,i.jsxs)("div",{className:o().gridRowContainer,children:[(0,i.jsx)("div",{className:o().innerGridContainer,children:d&&(null===(t=d.grid)||void 0===t?void 0:t.map((e,t)=>e.map((e,l)=>(0,i.jsx)(m,{cell:e,clickHandler:()=>f(t,l),flipCard:()=>u(d.flipCard(t,l)),toggleMemo:()=>u(d.toggleMemo(t,l)),selected:h===5*t+l},l))))}),(0,i.jsx)("div",{className:o().rowTally,children:d&&[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,i.jsx)(_,{tally:d.getRowTallies(t)},t))})]}),(0,i.jsxs)("div",{className:o().colTally,children:[d&&[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,i.jsx)(_,{tally:d.getColTallies(t)},t)),(0,i.jsx)("div",{style:{height:"100px",width:"100px"}})]})]}),(d.won||d.lost)&&(0,i.jsx)("div",{className:o().frostedContainer,children:(0,i.jsxs)("div",{className:o().gameOverContainer,children:[(0,i.jsx)("div",{className:o().gameOverText,children:d.won?"YOU WON!":"YOU LOST :("}),(0,i.jsx)("button",{className:o().gameOverButton,onClick:()=>u(d.initialize()),children:d.won?"NEXT LEVEL":"PLAY AGAIN?"})]})})]})}var f=l(4699),C=l.n(f),p=l(2809),b=l.n(p);function x(e){let{totalCoins:t,currentCoins:l,memoEnabled:n,toggleMemo:r,currentLevel:o}=e;return(0,i.jsxs)("div",{className:b().sidebar,children:[(0,i.jsxs)("div",{className:b().scoreboard,children:[(0,i.jsx)("div",{className:b().coinLabel,children:"Your coins"}),(0,i.jsx)("div",{className:b().coinTotal,children:t.toLocaleString(void 0,{minimumIntegerDigits:5,useGrouping:!1})}),(0,i.jsx)("div",{className:b().coinLabel,children:"Earned coins"}),(0,i.jsx)("div",{className:b().coinTotal,children:l.toLocaleString(void 0,{minimumIntegerDigits:5,useGrouping:!1})}),(0,i.jsxs)("div",{className:b().coinLabel,children:["Level ",o]})]}),(0,i.jsx)("div",{className:b().memoButton,children:(0,i.jsx)(c.default,{src:"/memo_button.png",width:314,height:358,alt:"Toggle memo",title:"Toggle memo",className:"".concat(b().memoImage," ").concat(n&&b().memoImageToggled),onClick:()=>r()})})]})}function w(){let[e,t]=(0,n.useState)(0),[l,r]=(0,n.useState)(0),[o,a]=(0,n.useState)(0),[s,c]=(0,n.useState)(1);return(0,n.useEffect)(()=>{t(Number(localStorage.getItem("totalCoins"))||0)},[]),(0,n.useEffect)(()=>{let e=e=>{"Control"===e.key&&a(!o)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[o]),(0,i.jsx)("div",{className:C().page,children:(0,i.jsxs)("main",{className:C().main,children:[(0,i.jsx)(x,{memoEnabled:o,totalCoins:e,currentCoins:l,toggleMemo:()=>a(!o),currentLevel:s}),(0,i.jsx)(v,{memoEnabled:o,setCurrentCoins:r,addTotalCoins:l=>{t(e+l),localStorage.setItem("totalCoins",e+l+"")},setCurrentLevel:c})]})})}},9956:function(e){e.exports={tallyContainer:"cell-tally_tallyContainer__hD6Pt",valueDiv:"cell-tally_valueDiv__IKRl0",bombDiv:"cell-tally_bombDiv__3mh_d",voltorb:"cell-tally_voltorb___4_nt",bombTally:"cell-tally_bombTally__kjjPH"}},9024:function(e){e.exports={cell:"cell_cell__Ns5q3",cellSelected:"cell_cellSelected__r0rwj",cellImage:"cell_cellImage__vlksx",cellContent:"cell_cellContent___tYLw",unflippedContainer:"cell_unflippedContainer__b8UL_",flippedContainer:"cell_flippedContainer__4fvov",cellMemo:"cell_cellMemo__ZJCSM"}},7813:function(e){e.exports={innerGridContainer:"grid_innerGridContainer__cSpDl",rowTally:"grid_rowTally__rv53R",colTally:"grid_colTally__3NXxj",gridRowContainer:"grid_gridRowContainer__iB_YF",gridColContainer:"grid_gridColContainer__Qq0aY",outerGridContainer:"grid_outerGridContainer__dxcqC",frostedContainer:"grid_frostedContainer__1xQYv",gameOverContainer:"grid_gameOverContainer__CbYTk",gameOverText:"grid_gameOverText__2AvWs",gameOverButton:"grid_gameOverButton___hAGQ"}},4699:function(e){e.exports={sidebar:"page_sidebar__jQWvw",page:"page_page__YnKHE",main:"page_main__pZ4ql",ctas:"page_ctas___ariO",primary:"page_primary___J8_A",secondary:"page_secondary__V1XWH",footer:"page_footer__35eJ_",logo:"page_logo__yMLeU"}},2809:function(e){e.exports={sidebar:"sidebar_sidebar__u49QQ",scoreboard:"sidebar_scoreboard__kl65f",coinLabel:"sidebar_coinLabel__zTyUg",coinTotal:"sidebar_coinTotal__Rd9gs",memoButton:"sidebar_memoButton__ZIZZB",memoImage:"sidebar_memoImage__Ey4He",memoImageToggled:"sidebar_memoImageToggled__ut8tn",quitButton:"sidebar_quitButton__cfDgO",quitImage:"sidebar_quitImage__hmCj0"}}},function(e){e.O(0,[128,648,971,23,744],function(){return e(e.s=3758)}),_N_E=e.O()}]);